/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/js/obligations.js":
/*!*******************************!*\
  !*** ./src/js/obligations.js ***!
  \*******************************/
/***/ (() => {

eval("/////Config Objects and Variables/////////////////////////////////////////////////////////////////////////////\nlet optionChain = []\n\n/////Script Launcher///////////////////////////////////////////////////////////////////////////////\n\naddCheckboxes();\naddElements();\n\n\n/////Input creation functions/////////////////////////////////////////////////////////////////////////////////\n\nfunction generateButton(button, dropDown, options) {\n\t//Adds buttons for data extraction.\n\n\tbutton.element = document.createElement('span');\n\tbutton.element.innerText = button.text;\n\tsetAttributes(button.element, button.attributes)\n\tsetAttributes(button.element, {\n\t\tonclick: \"return false\",\n\t\tclass: \"mybutton\"\n\t});\n\n\tbutton.element.setAttribute('id', button.name);\n\n\tdocument.getElementById(\"NoticesDataGrid\").appendChild(button.element);\n\tif (button.name !== \"letterButton\") {\n\t\tbutton.element.addEventListener('click', function () { exportData(button.description) });\n\t} else {\n\t\tdocument.getElementById(\"NoticesDataGrid\").appendChild(dropDown);\n\t\tbutton.element.addEventListener('click', function () {\n\t\t\tconst option = options.find((option) => {\n\t\t\t\treturn option.description === dropDown.value\n\t\t\t})\n\t\t\texportData(option.description, option.agency, option.letters, option.extended, option.SharePoint) \n\t\t});\n\t}\n\treturn button;\n}\n\nfunction generateOption(option, dropDown) {\n\t//Adds options to the drop down.\n\toption.element = document.createElement(\"option\")\n\toption.element.text = option.description\n\tdropDown.add(option.element);\n\treturn option;\n}\n\nfunction addElements() {\n\n\tvar dropDown = document.createElement(\"select\");;\n\tdropDown.style.width = \"180px\";\n\tdropDown.style.marginLeft = \"6px\";\n\t//Button properties\n\tvar buttons = [\n\t\t{ name: \"tableButton\", description: \"Export obligations\", text: \"xlxs\", attributes: { \"style\": \"margin-left: 6px; cursor: hand\" } },\n\t\t//\t{ name: \"tableSettings\", description: \"Table settings\" },\n\t\t{ name: \"letterButton\", description: \"Generate letter(s)\", text: \"Generate letter(s)\", attributes: { \"style\": \"margin-left: 37px; cursor: hand\" } },\n\t\t{ name: \"holdButton\", description: \"Bulk Notes Update\", text: \"Bulk Notes\", attributes: { \"style\": \"margin-left: 44px; cursor: hand\" } },\n\t\t{ name: \"holdButton\", description: \"Bulk Hold Update\", text: \"Bulk Hold\", attributes: { \"style\": \"margin-left: 3px; cursor: hand\" } },\n\t\t{ name: \"WriteoffButton\", description: \"Bulk Writeoff Update\", text: \"Bulk Writeoff\", attributes: { \"style\": \"margin-left: 3px; cursor: hand\" } }//,\n\t\t//{ name: \"DeregistrationButton\", description: \"Bulk Deregistration Update\", text: \"Bulk Deregistration\", attributes: { \"style\": \"margin-left: 3px; cursor: hand\" } }//,\n\t\t//,\n\t\t//\t{name: \"FeeButton\", description: \"Bulk Fee Waive\"}\n\t];\n\t\n\n\tvar options = [\n\t\t{ description: \"Enforcement Confirmed\", letters: [\"Enforcement Confirmed\"]},\n\t\t{ description: \"Enforcement Cancelled\", agency: true, letters: [\"Enforcement Cancelled\", \"Agency Enforcement Cancelled\"]},\n\t\t{ description: \"ER Confirm/ FW Grant\", agency: true, letters: [\"ER Confirm/ FW Grant\", \"Agency FR Granted\"] },\n\t\t{ description: \"Report Needed\", letters: [\"Report Needed\"] },\n\t\t{ description: \"Unable to Contact Applicant\", letters: [\"Unable to Contact Applicant\"] },\n\t\t{ description: \"Notice of Deregistration\", agency: true, letters: [\"Notice of Deregistration\"] },\n\t\t{ description: \"FVS Eligible\", agency: true, letters: [\"FVS Eligible Debtor\", \"FVS Eligible Agency\"] },\n\t\t{ description: \"FVS Ineligible\", letters: [\"FVS Ineligible\"] },\n\t\t{ description: \"FVS Further Information Required\", letters: [\"FVS Further Information Required\"] },\n\t\t{ description: \"PSL\", extended: true, letters: [\"PSL\"] },\n\t\t{ description: \"Suspension of driver licence\", extended: true, letters: [\"Suspension of driver licence\"] },\n\t\t{ description: \"Suspension of driver registration - Ind\", extended: true, letters: [\"Suspension of vehicle registration - Ind\"] },\n\t\t{ description: \"Suspension of driver registration - Corp\", extended: true, letters: [\"Suspension of vehicle registration - Corp\"] },\n\t\t{ description: \"POI - direction to produce\", extended: true, letters: [\"POI - direction to produce\"] },\n\t\t{ description: \"PA Refused - Active 7DN\", extended: true, letters: [\"PA Refused - Active 7DN\"] },\n\t\t{ description: \"No Grounds\", letters: [\"No Grounds\"] },\n\t\t{ description: \"PA Refused\", letters: [\"PA Refused\"] },\n\t\t{ description: \"EOT Refused\", letters: [\"EOT Refused\"] },\n\t\t{ description: \"PA Refused-Sanction\", letters: [\"PA Refused-Sanction\"] },\n\t\t{ description: \"PA App Incomplete\", letters: [\"PA App Incomplete\"] },\n\t\t{ description: \"Company PA Ineligible SZWIP\", letters: [\"Company PA Ineligible SZWIP\"] },\n\t\t{ description: \"EOT Refused - Infringements stage\", letters: [\"EOT Refused - Infringements stage\"] },\n\t\t{ description: \"PA Refused Expired 7DN\", letters: [\"PA Refused Expired 7DN\"] },\n\t\t{ description: \"Fee Removal PIF\", letters: [\"Fee Removal PIF\"] },\n\t\t{ description: \"CF Fee Removal Granted\", letters: [\"CF Fee Removal Granted\"] },\n\t\t{ description: \"CF Fee Removal Refused\", letters: [\"CF Fee Removal Refused\"] },\n\t\t{ description: \"Fee Removal Refused\", letters: [\"Fee Removal Refused\"] },\n\t\t{ description: \"FR Refused - Active 7DN\", letters: [\"FR Refused - Active 7DN\"] },\n\t\t{ description: \"FW Refused - Sanction\", letters: [\"FW Refused - Sanction\"] },\n\t\t{ description: \"FR Granted\", agency: true, letters: [\"FR Granted\", \"Agency FR Granted\"] },\n\t\t{ description: \"FR Granted - Active 7DN\", agency: true, letters: [\"FR Granted - Active 7DN\", \"Agency FR Granted\"] },\n\t\t{ description: \"FR Granted - Sanction\", agency: true, letters: [\"FR Granted - Sanction\", \"Agency FR Granted\"] },\n\t\t{ description: \"Ineligible for ER - offence type\", letters: [\"Ineligible for ER - offence type\"] },\n\t\t{ description: \"Court not an option\", letters: [\"Court not an option\"] },\n\t\t{ description: \"ER Ineligible Deregistered Company\", letters: [\"ER Ineligible Deregistered Company\"] },\n\t\t{ description: \"Ineligible Paid in full\", letters: [\"Ineligible Paid in full\"] },\n\t\t{ description: \"Appeal not available\", letters: [\"Appeal not available\"] },\n\t\t{ description: \"Nomination Not Grounds\", letters: [\"Nomination Not Grounds\"] },\n\t\t{ description: \"ER Ineligible Court Fine\", letters: [\"ER Ineligible Court Fine\"] },\n\t\t{ description: \"Spec Circ Options\", letters: [\"Spec Circ Options\"] },\n\t\t{ description: \"ER Additional Info\", letters: [\"ER Additional Info\"] },\n\t\t{ description: \"Ineligible for ER enforcement action\", letters: [\"Ineligible for ER enforcement action\"] },\n\t\t{ description: \"Ineligible PU - Outside Time\", letters: [\"Ineligible PU - Outside Time\"] },\n\t\t{ description: \"Ineligible for ER previous review\", letters: [\"Ineligible for ER previous review\"] },\n\t\t{ description: \"ER Ineligible PU\", letters: [\"ER Ineligible PU\"] },\n\t\t{ description: \"Claim of payment to agency\", letters: [\"Claim of payment to agency\"] },\n\t\t{ description: \"Request for photo evidence\", letters: [\"Request for photo evidence\"] },\n\t\t{ description: \"Ineligible Incorrect company applying\", letters: [\"Ineligible Incorrect company applying\"] },\n\t\t{ description: \"Spec Circ No Grounds\", letters: [\"Spec Circ No Grounds\"] },\n\t\t{ description: \"Spec Circ Report Required\", letters: [\"Spec Circ Report Required\"] },\n\t\t{ description: \"Unauthorised 3rd party applying\", letters: [\"Unauthorised 3rd party applying\"] },\n\t\t{ description: \"Ineligible Incorrect person applying\", letters: [\"Ineligible Incorrect person applying\"] },\n\t\t{ description: \"Spec Circ App Required\", letters: [\"Spec Circ App Required\"] },\n\t\t{ description: \"Spec Circ Report Insufficient\", letters: [\"Spec Circ Report Insufficient\"] },\n\t\t{ description: \"SC 3P Lawyer - Report Insufficient\", letters: [\"SC 3P Lawyer - Report Insufficient\"] },\n\t\t{ description: \"ER Application Incomplete\", letters: [\"ER Application Incomplete\"] },\n\t\t{ description: \"SC 3P Lawyer - Report Required\", letters: [\"SC 3P Lawyer - Report Required\"] },\n\t\t{ description: \"ER Confirm/FW Grant - Active 7DN\", letters: [\"ER Confirm/FW Grant - Active 7DN\"] },\n\t\t{ description: \"ER Confirm/FW Grant - 7DN Expired option\", letters: [\"ER Confirm/FW Grant - 7DN Expired option\"] }\n\n\n\n\t];\n\n\tbuttons.map(button => generateButton(button, dropDown, options));\n\toptions.map(option => generateOption(option, dropDown));\n\n\tlet auditCheck = document.createElement('input')\n\tauditCheck.setAttribute('type', 'checkbox');\n\tauditCheck.setAttribute('id', 'auditCheck');\n\tvar auditCheckLabel = document.createElement('label');\n\tauditCheckLabel.appendChild(document.createTextNode('Parse Audit Trail?'));\n\tauditCheckLabel.appendChild(auditCheck);\n\t//document.getElementById(\"NoticesDataGrid\").appendChild(auditCheckLabel);\n\n\n\tlet email = document.createElement('input')\n\temail.setAttribute('type', 'radio');\n\temail.setAttribute('id', 'email');\n\temail.setAttribute('name', 'method');\n\tvar emailCheckLabel = document.createElement('label');\n\temailCheckLabel.appendChild(email);\n\temailCheckLabel.className = 'label';\n\temailCheckLabel.appendChild(document.createTextNode('Email'));\n\tdropDown.after(emailCheckLabel);\n\n\tlet letter = document.createElement('input')\n\tletter.setAttribute('type', 'radio');\n\tletter.setAttribute('id', 'letter');\n\tletter.setAttribute('name', 'method');\n\tletter.setAttribute('checked', 'checked');\n\tvar letterCheckLabel = document.createElement('label');\n\tletterCheckLabel.className = 'label';\n\tletterCheckLabel.appendChild(letter);\n\tletterCheckLabel.appendChild(document.createTextNode('Letter'));\n\tdropDown.after(letterCheckLabel);\n\n\tdocument.querySelectorAll('.label').forEach(element => {\n\t\telement.addEventListener('mouseup', function() {updateButton(element)})\n\t})\n\n\tfunction updateButton(element) {\n\t\tif (element.innerHTML.includes('Email')) {\n\t\t\tdocument.getElementById('letterButton').innerText = 'Generate email'\n\t\t} else if (element.innerHTML.includes('Letter')) {\n\t\t\tdocument.getElementById('letterButton').innerText = 'Generate letter(s)'\n\t\t}\n\t}\n\n\n\tlet ObSelector = '\\\n\t<tr> \\\n        <td style=\"padding: 6px; padding-bottom:0px\"> \\\n\t\t\t<input type=\"image\" name=\"DebtorDecisionCtrl$selectAllButton\" id=\"DebtorDecisionCtrl_selectAllButton\" tabindex=\"42\" src=\"' + chrome.runtime.getURL('Images/selectApplicable.png') + '\" onclick=\"selectApplicable(); return false\" > \\\n\t\t\t<input style=\"float:left\" type=\"image\" name=\"DebtorDecisionCtrl$selectAllButton\" id=\"DebtorDecisionCtrl_selectAllButton\" tabindex=\"42\" src=\"' + chrome.runtime.getURL('Images/selectenfreview.png') + '\" onclick=\"selectEnforcementReview(); return false\" > \\\n\t\t\t<input style=\"float:left\" type=\"image\" name=\"DebtorDecisionCtrl$selectAllButton\" id=\"DebtorDecisionCtrl_selectAllButton\" tabindex=\"42\" src=\"' + chrome.runtime.getURL('Images/selectFVSPEND.png') + '\" onclick=\"selectFVSHolds(); return false\" > \\\n\t\t\t<input style=\"float:left\" type=\"image\" name=\"DebtorDecisionCtrl$selectAllButton\" id=\"DebtorDecisionCtrl_selectAllButton\" tabindex=\"42\" src=\"' + chrome.runtime.getURL('Images/selectFVSPEND.png') + '\" onclick=\"selectPAHolds(); return false\" > \\\n\t\t</td> \\\n    </tr>'\n\n\n\tdocument.querySelector(\"#NoticesDataGrid > tbody\").insertAdjacentHTML('afterbegin', ObSelector);\n\n\n\n\n}\n\nfunction addCheckboxes() {\n\t//Adds checkboxes next to each obligation\n\tlet table = document.getElementById(\"DebtorNoticesCtrl_DebtorNoticesTable_tblData\");\n\tfor (let i = 0, row; row = table.rows[i]; i++) {\n\t\tlet x = row.insertCell(0);\n\t\tlet checkbox = document.createElement('input');\n\t\tcheckbox.setAttribute('type', 'checkbox');\n\t\tif (i !== 0)\n\t\t\tcheckbox.setAttribute('name', 'boxes');\n\t\tx.appendChild(checkbox);\n\t\tif (i === 0)\n\t\t\tcheckbox.setAttribute('onClick', 'toggle(this)');\n\t}\n}\n\n\n\nfunction captureObligationNumbers() {\n\t//Reference the Table.\n\tlet grid = document.getElementById(\"DebtorNoticesCtrl_DebtorNoticesTable_tblData\");\n\n\t//Reference the CheckBoxes in Table.\n\tlet checkBoxes = grid.getElementsByTagName(\"input\");\n\tobligationChain = [];\n\t//Loop through the CheckBoxes.\n\tfor (let i = 1; i < checkBoxes.length; i++) {\n\t\tif (checkBoxes[i].checked) {\n\t\t\tlet obligationNumber = checkBoxes[i].parentNode.parentNode.children[1].innerHTML;\n\t\t\tobligationChain.push(obligationNumber);\n\t\t}\n\t}\n\n\treturn obligationChain;\n}\n\nfunction exportData(value, agency = false, letters = [], extended = false, SharePoint = false) {\n\tlet obligationArray = captureObligationNumbers()\n\t//\tlet PAT = document.getElementById('auditCheck').checked;\n\tPAT = false\n\t//email = false\n\tlet email = document.getElementById('email').checked;\n\tif (obligationArray.length > 0) {\n\t\tconst rows = parseTable(document.querySelector(\"#DebtorNoticesCtrl_DebtorNoticesTable_tblData\"));\n\t\tconst filteredRows = rows.filter((row) => {return Object.values(row)[0] === true})\n\t\tconsole.log(filteredRows)\n\t\tlet data = [obligationArray, value, null, PAT, email, window.location.host.split(\".\")[0], filteredRows, agency, letters, extended, SharePoint]\n\t\tsaveIT()\n\n\t\tchrome.runtime.sendMessage(data, function (response) {\n\t\t\t//\tconsole.log(response.farewell);\n\t\t});\n\t} else {\n\t\talert('You need to select at least one obligation');\n\t}\n}\n\nvar s = document.createElement('script');\ns.src = chrome.runtime.getURL('js/helper.js');\nvar p = document.createElement('script');\np.src = chrome.runtime.getURL('js/External/jquery-3.4.1.js');\n\n//document.body.insertAdjacentHTML('beforeend', s);\n\n\n(document.head || document.documentElement).appendChild(s);\n(document.head || document.documentElement).appendChild(p);\n\nfunction setAttributes(el, attrs) {\n\tfor (var key in attrs) {\n\t\tel.setAttribute(key, attrs[key]);\n\t}\n}\n\n/**\n* @license\n*\n* The MIT License (MIT)\n*\n* Copyright (c) 2014 Nick Williams\n*\n* Permission is hereby granted, free of charge, to any person obtaining a copy\n* of this software and associated documentation files (the \"Software\"), to deal\n* in the Software without restriction, including without limitation the rights\n* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the Software is\n* furnished to do so, subject to the following conditions:\n*\n* The above copyright notice and this permission notice shall be included in\n* all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n* THE SOFTWARE.\n*/\n\n/**\n * generates factory functions to convert table rows to objects,\n * based on the titles in the table's <thead>\n * @param  {Array<String>} headings the values of the table's <thead>\n * @return {(row: HTMLTableRowElement) => Object} a function that takes a table row and spits out an object\n */\nfunction mapRow(headings) {\n    return function mapRowToObject({ cells }) {\n        return [...cells].reduce(function (result, cell, i) {\n            const input = cell.querySelector(\"input,select\");\n            var value;\n\n            if (input) {\n                value = input.type === \"checkbox\" ? input.checked : input.value;\n\t\t\t} else if (headings[i] === \"Offence\") {\n\t\t\t\tvalue = cell.title\n\t\t\t} else {\n                value = cell.innerText;\n            }\n\n            return Object.assign(result, { [headings[i]]: value });\n        }, {});\n    };\n}\n\n/**\n * given a table, generate an array of objects.\n * each object corresponds to a row in the table.\n * each object's key/value pairs correspond to a column's heading and the row's value for that column\n *\n * @param  {HTMLTableElement} table the table to convert\n * @return {Array<Object>}       array of objects representing each row in the table\n */\nfunction parseTable(table) {\n    var headings = [...table.tHead.rows[0].cells].map(\n        heading => heading.innerText.replace(\" ▲ 1\", \"\").replace(\" ▼ 1\", \"\").replace(\" ▼ 2\", \"\").replace(\" ▲ 2\", \"\")\n\t);\n\n    return [...table.tBodies[0].rows].map(mapRow(headings));\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack://Toolkit-for-VIEW/./src/js/obligations.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./src/js/obligations.js"]();
/******/ 	
/******/ })()
;